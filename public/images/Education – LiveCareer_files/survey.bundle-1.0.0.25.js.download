(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{587:function(e,t,n){"use strict";n.r(t),n.d(t,"mapDispatchToProps",(function(){return z}));var s=n(0),r=n.n(s),o=n(24),i=n(16),a=n(1),u=n(31),c=n(52),l=n(62),p=n(5),d=n(596),f=n(41),D=n(42),y=n(75),b=n(30),v=n(22),I=n.n(v);function C(e){var t=["student","entry-lvl","experienced","manager","executive"];return r.a.createElement("div",{className:"page-main sticky"},r.a.createElement(f.a,{hideSaveChangeCta:!0}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement(D.a,{updateVisitedIndex:e.updateVisitedIndex,pageCode:"survey",isProgressBar:!0,hidePreviewTipSection:!0,section:"survey",hideSaveChangeCta:!0}),r.a.createElement("section",{className:"jobstatus-container"},r.a.createElement("div",{className:"container p-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 p-0"},r.a.createElement("div",{className:"career-information"},r.a.createElement("ul",{className:"list-group list-preference js-preference ".concat((e.state.selectedExpLevel.responseID||e.state.selectedExpLevel.responseCD)&&"selected-item")},e.state.experienceLevel.map((function(n,s){return r.a.createElement("li",{key:s,className:"list-group-item ".concat((0!=e.state.selectedExpLevel.responseID&&e.state.selectedExpLevel.responseID===n.responseID||e.state.selectedExpLevel.responseCD&&e.state.selectedExpLevel.responseCD===n.responseCD)&&"selected")},r.a.createElement("div",{id:n.label,className:"item-wrap",onClick:e.careerActiveState},r.a.createElement("div",{className:"item-center"},r.a.createElement("span",{className:"spirit-ciupp icon-".concat(t[s])}),r.a.createElement("p",{className:"text-prefer"},n.displayText))))}))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"dropdown-wrapper"},r.a.createElement(y.a,{labelName:window.RDL.Localization.surveyCarrerfieldLabel,customClass:"select-degree",valueKey:"displayText",defaultValue:e.state.selectedIndustry.displayText,labelKey:"displayText",optionLabel:e.state.industry,name:window.RDL.Localization.surveyCarrerfieldLabel,errorMessage:"",onChange:e.onChange,placeHolder:RDL.Localization.btnSel}),e.state.selectedIndustry.displayText&&e.state.selectedIndustry.displayText!=window.RDL.Localization.btnSel?r.a.createElement(y.a,{labelName:window.RDL.Localization.surveySubCarrerfieldLabel,customClass:"select-degree",labelKey:"displayText",defaultValue:e.state.selectedSubIndustry.displayText,optionLabel:e.state.subIndustry,valueKey:"displayText",name:window.RDL.Localization.surveySubCarrerfieldLabel,errorMessage:"",onChange:e.onChange,placeHolder:RDL.Localization.btnSel}):"")),r.a.createElement("div",{className:"col-12 mt-5"},r.a.createElement("div",{className:"page-action d-flex mt-3"},r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:e.onBackClick},RDL.Localization.btnBack),r.a.createElement("button",{className:"btn btn-primary btn-lg",type:"button",onClick:e.saveSurveyResponses},RDL.Localization.btnContinue)))))))),r.a.createElement(b.b,null),RDL.enableInterceptModal&&r.a.createElement(I.a,{isOpen:e.state.showInterceptModal,title:window.RDL.Localization.interceptModalTitle,btnPrimaryLabel:"",btnSecondaryLabel:"",onPrimaryClick:"",onSecondaryClick:"",closeModal:e.closeModal,isHeaderIcon:!0,shouldCloseOnOverlayClick:e.closeModal,cssClass:{btnPrimary:"btn-primary mr-0",headerIconClassName:"far fa-exclamation-circle fa-lg",btnSecondary:"btn-secondary",modalDialog:"modal-md"}},r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",{className:"p mb-0",dangerouslySetInnerHTML:{__html:window.RDL.Localization.interceptModalText+'<br/> <a href="'+window.RDL.Paths.interceptLink+'">'+window.RDL.Localization.interceptModalLinkText+"</a>"}}))))}
// EXTERNAL MODULE: ./node_modules/@license-admin/viewmodel/build/index.js
n(13);var h=window.RDL.Paths.BaseApiUrl;function m(e){return fetch(h+"survey_options?cultureCD="+e,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}function L(e,t,n){return fetch(h+"survey/surveyoptions?careerLevelQuestionId="+e+"&industryQuestionId="+t+"&culture="+n,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(n){var s=n.careerLevels?n.careerLevels.responses.slice(0,5):[],r=n.industries?n.industries.responses:[];return s&&s.length>0&&s.forEach((function(t){t.questionID=e})),r&&r.length>0&&r.forEach((function(e){e.questionID=t})),{experienceLevel:s,industries:r}}))}function E(e,t){return fetch(h+"survey/subindustry?reponse_id="+e+"&culture="+t,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))}function S(e,t,n){return fetch(h+"subindustries?questionCD="+e+"&industryCD="+t+"&cultureCD="+n,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))}function g(e,t,n,s){return fetch(h+"save_or_update_user_response",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({responseList:e,docID:t,userUID:n,cultureCD:s})}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}function w(e,t,n,s,r){var o=[];return e.forEach((function(e,i){r[i]&&o.push({QuestionID:e,QuestionCD:t,UserUID:n,DocumentID:s,SurveyResponses:[r[i]]})})),function(e){return fetch(h+"survey",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}(o)}function R(e,t,n,s){return(s?function(e,t){return fetch(h+"user_responses?userUID="+e+"&cultureCd="+t,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=[];return e&&e.length>0&&e.forEach((function(e,n){t.push({responseCD:e.responses?e.responses[0].responseCD:"",questionCD:null,questionID:e.question.id,responseID:e.responses?e.responses[0].responseID:0})})),t})).catch((function(e){console.log(e)}))}
// EXTERNAL MODULE: ./node_modules/@license-admin/helper/build/index.js
(t,n):function(e){return fetch(h+"person_responses?partyid="+e,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))}(e)).then((function(e){return e||[]}))}var x=n(2),U=n(19),T=n.n(U);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,G(s.key),s)}}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=Q(e);if(t){var r=Q(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return(t=G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!==j(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(i,e);var t,n,s,o=N(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M(A(n=o.call(this,e,t)),"assignRef",(function(e,t){void 0!==n[e]&&(n[e]=t)})),M(A(n),"getSurveyData",(function(){(function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],o=[],i=s?L(e,t,n):m(n);return i.then((function(n){return n.experienceLevel&&n.experienceLevel.length>0&&(n.experienceLevel=n.experienceLevel.slice(0,5),n.experienceLevel.forEach((function(t,n){r.push({displayText:t.definition?t.definition:t.displayText,responseID:t.responseID?t.responseID:0,responseCD:t.responseCD?t.responseCD:t.id,questionCD:t.questionCD?t.questionCD:null,questionID:s?e:0,surveyResponseId:t.responseID?t.responseID:0})}))),n.industries&&n.industries.length>0&&n.industries.forEach((function(e,n){o.push({displayText:e.definition?e.definition:e.displayText,responseID:e.responseID?e.responseID:0,responseCD:e.responseCD?e.responseCD:e.id,questionCD:e.questionCD?e.questionCD:null,questionID:s?t:0,surveyResponseId:e.responseID?e.responseID:0,label:e.definition?e.definition:e.displayText,value:e.definition?e.definition:e.displayText})})),{experienceLevel:r,industries:o}}))})(a.UserQuestionID.EXPLVL,a.UserQuestionID.CAREER,window.RDL.cultureCD,n.isGetByID).then((function(e){var t=e.industries;t.unshift(n.objIndDefault),n.setState({experienceLevel:T()(n.state.experienceLevel,{$set:e.experienceLevel}),industry:T()(n.state.industry,{$set:t})}),n.GetPersonResponses()}))})),M(A(n),"getSubIndustry",(function(e){var t=n.isGetByID?n.state.industry.filter((function(t){return t.responseID==e})):n.state.industry.filter((function(t){return t.responseCD==e}));t.length>0?function(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],i=r?E(s,n):S(e,t,n);return i.then((function(e){return e&&e.length>0&&e.forEach((function(e){o.push({displayText:e.definition?e.definition:e.displayText,responseID:e.responseID?e.responseID:0,responseCD:e.responseCD?e.responseCD:e.id,questionCD:e.questionCD?e.questionCD:null,questionID:r?166:0,surveyResponseId:e.responseID?e.responseID:0,label:e.definition?e.definition:e.displayText,value:e.definition?e.definition:e.displayText})})),o}))}(a.UserQuestionCD.CARSUB,t[0].responseCD,window.RDL.cultureCD,t[0].responseID,n.isGetByID).then((function(e){var t=e;t.unshift(n.objSubIndDefault),n.setState({subIndustry:T()(n.state.subIndustry,{$set:t})},(function(){document.getElementsByClassName("form-group")[1].classList.add("d-opac"),R(n.props.User.partyID,n.props.User.UserUID,window.RDL.cultureCD,n.isGetByID).then((function(e){if(e&&e.length>0){var t=n.isGetByID?e.filter((function(e){return e.questionID==a.UserQuestionID.CARSUB}))[0]:e.filter((function(e){return e.questionCD==a.UserQuestionCD.CARSUB}))[0];if(n.state.subIndustry&&t){var s=n.state.subIndustry.filter((function(e){return e.responseCD==t.responseCD}))[0];s&&n.setState({selectedSubIndustry:T()(n.state.selectedSubIndustry,{$set:s})})}}}))}))})):n.setState({subIndustry:T()(n.state.subIndustry,{$set:""})})})),M(A(n),"careerActiveState",(function(e){if(e)if(n.state.selectedExpLevel.responseID||n.state.selectedExpLevel.responseCD)n.setState({selectedExpLevel:O(O({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL})});else{var t=e.target?e.target.innerText.trim():e.innerText;n.setState({selectedExpLevel:t?n.state.experienceLevel.filter((function(e){return e.displayText==t}))[0]:O(O({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL})})}})),M(A(n),"saveSurveyResponses",(function(){var e=[],t=[];if(Object.keys(n.state).forEach((function(s){var r;-1!=["selectedExpLevel","selectedIndustry","selectedSubIndustry"].indexOf(s)&&(0!=n.state[s].responseID||n.state[s].responseCD&&n.state[s].responseCD!=window.RDL.Localization.btnSel?(r=n.isGetByID?{ResponseID:n.state[s].responseID,ResponseText:n.state[s].displayText,ResponseCD:n.state[s].responseCD}:{PartyID:n.props.User.partyID,ResponseCD:n.state[s].responseCD,CultureCD:window.RDL.cultureCD,QuestionCD:n.state[s].questionCD},e.push(r),t.push({responseID:n.state[s].responseID,responseCD:n.state[s].responseCD,questionID:n.state[s].questionID,questionCD:n.state[s].questionCD})):0===n.state[s].responseID&&t.push({responseID:0,responseCD:"",questionID:n.state[s].questionID,questionCD:n.state[s].questionCD}))})),t.length>0){var s=x.DocumentHelper.addUpdateDocResponsesForQID(n.state.doc,t,n.isGetByID),r=n.state.selectedSubIndustry.displayText,o="jobTitle";0==n.state.selectedSubIndustry.responseID&&(r=n.state.selectedIndustry.displayText,o="industry"),function(e,t,n,s,r,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(i?w(e,t,n,s,r):g(r,s,n,o)).then((function(e){return 0==i?e:e.ok?e.json():void 0})).then((function(e){return e}))}([a.UserQuestionID.EXPLVL,a.UserQuestionID.CAREER,a.UserQuestionID.CARSUB],null,n.props.User.UserUID,s.id,e,window.RDL.cultureCD,n.isGetByID).then((function(e){var t=n.state.selectedIndustry.responseCD;!n.isGetByID&&e&&(o="industry",t=e.split(";")[0],r=e.split(";")[1]),s=x.DocumentHelper.setTTCPreferencesInDocument(s,r,o,t),n.props.documentActions.UpdateDocument(n.props.User.UserUID,s),n.props.documentActions.SetJobTitlePreference(s),n.props.history.push(Object(p.b)("survey").nextPageUrl),RDL.trackExpLevel&&n.trackExperienceLevel()}))}else n.props.history.push(Object(p.b)("survey").nextPageUrl)})),M(A(n),"trackExperienceLevel",(function(){var e="";if(n.state.selectedExpLevel){switch(n.state.selectedExpLevel.responseCD){case"STUDEN":e="Student";break;case"ENTLVL":e="Entry Level";break;case"EXPERN":e="Experienced";break;case"MANAGR":e="Manager";break;case"EXECTV":e="Executive"}var t={"Experience Level":e};if(""!=e){window.RDL.TrackEvents("identify",t,n.props.User.UserUID,x.CommonHelper.isLoggedInUser(window.RDL.UserClaims));var s=JSON.parse(localStorage.getItem("mixPanelIdentifyPreLogin"))||{};s["Experience Level"]=e,localStorage.setItem("mixPanelIdentifyPreLogin",JSON.stringify(s))}}})),M(A(n),"onBackClick",(function(){window.RDL.skipSelectCV?n.props.history.push(Object(p.b)("selectResume").backPageUrl):n.props.history.push(Object(p.b)("survey").backPageUrl)})),M(A(n),"closeModal",(function(){n.setState({showInterceptModal:!1,popupName:""})})),M(A(n),"onChange",(function(e){if(e){var t=n.isGetByID?"questionID":"questionCD",s=n.isGetByID?"responseID":"responseCD",r=e[t],o=e[s];switch(r){case a.UserQuestionID.CAREER:case a.UserQuestionCD.CAREER:n.setState({selectedIndustry:T()(n.state.selectedIndustry,{$set:e}),selectedSubIndustry:T()(n.state.selectedSubIndustry,{$set:n.objSubIndDefault})}),0!=o&&n.getSubIndustry(o);break;case a.UserQuestionID.CARSUB:case a.UserQuestionCD.CARSUB:n.setState({selectedSubIndustry:T()(n.state.selectedSubIndustry,{$set:e})})}}})),n.objIndDefault=O(O({},a.surveyType),{},{displayText:window.RDL.Localization.btnSel,questionID:a.UserQuestionID.CAREER,questionCD:a.UserQuestionCD.CAREER,label:RDL.Localization.btnSel}),n.objSubIndDefault=O(O({},a.surveyType),{},{displayText:window.RDL.Localization.btnSel,questionID:a.UserQuestionID.CARSUB,questionCD:a.UserQuestionCD.CARSUB,label:RDL.Localization.btnSel}),n.state={experienceLevel:[O({},a.surveyType)],industry:[O({},a.surveyType)],subIndustry:[O({},a.surveyType)],selectedExpLevel:O(O({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL}),selectedIndustry:n.objIndDefault,selectedSubIndustry:n.objSubIndDefault,doc:n.props.Document,showInterceptModal:!0},n.isGetByID="LUK"===window.RDL.PortalSettings.ConfigurePortalCd.toUpperCase(),n.isNewTTCBaselined=RDL.isNewTTCBaselined,n}return t=i,(n=[{key:"componentDidMount",value:function(){this.isNewTTCBaselined||RDL.removeSurveyFromSteps||this.getSurveyData(),RDL.closePageLoader()}},{key:"componentWillMount",value:function(){(this.isNewTTCBaselined||RDL.removeSurveyFromSteps)&&this.props.history.replace(Object(p.b)("survey").nextPageUrl),"undefined"!=typeof localStorage&&(localStorage.getItem("interceptModalFR")?this.setState({showInterceptModal:!1}):localStorage.setItem("interceptModalFR",!0))}},{key:"GetPersonResponses",value:function(){var e,t,n,s,r=this;R(this.props.User.partyID,this.props.User.UserUID,window.RDL.cultureCD,this.isGetByID).then((function(o){o&&o.length>0&&(r.isGetByID?(e=o.filter((function(e){return e.questionID==a.UserQuestionID.EXPLVL}))[0],t=o.filter((function(e){return e.questionID==a.UserQuestionID.CAREER}))[0]):(e=o.filter((function(e){return e.questionCD==a.UserQuestionCD.EXPLVL}))[0],t=o.filter((function(e){return e.questionCD==a.UserQuestionCD.CAREER}))[0])),r.state.experienceLevel&&e&&(n=r.state.experienceLevel.filter((function(t){return t.responseCD==e.responseCD}))[0],r.setState({selectedExpLevel:n?T()(r.state.selectedExpLevel,{$set:n}):{}})),r.state.industry&&t&&(s=r.state.industry.filter((function(e){return e.responseCD==t.responseCD}))[0],r.setState({selectedIndustry:s?T()(r.state.selectedIndustry,{$set:s}):{}}),r.getSubIndustry(r.isGetByID?s.responseID:s.responseCD))}))}},{key:"render",value:function(){return r.a.createElement(C,{assignRef:this.assignRef,closeModal:this.closeModal,careerActiveState:this.careerActiveState,onBackClick:this.onBackClick,state:this.state,onChange:this.onChange,saveSurveyResponses:this.saveSurveyResponses})}}])&&k(t.prototype,n),s&&k(t,s),Object.defineProperty(t,"prototype",{writable:!1}),i}(s.Component);function z(e){return{documentActions:Object(i.b)(u,e),userActions:Object(i.b)(c,e),commonActions:Object(i.b)(l,e)}}t.default=Object(d.a)(Object(o.b)((function(e){return{Document:e.Document,User:e.User}}),z)(_))}}]);